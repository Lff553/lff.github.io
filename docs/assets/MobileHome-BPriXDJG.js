import{h as H,c as u,o as n,i as V,a as t,t as i,n as F,b as g,j as s,u as _,k as N,w as U,l as B,m as G,p as L,v as A,F as T,q as z,s as K,x as R,y as W,z as J}from"./vue-BrREPx09.js";import{t as X,f as j,u as Q,a as Z,b as O,E as Y,c as tt}from"./EditItemModal-B_i6yN27.js";import{_ as P}from"./index-DrgLXO57.js";import"./http-Cfj5UhdQ.js";import"./vendor-R-lXtGyY.js";const et={key:0,class:"item-image"},st=["src","alt"],lt={class:"item-header"},ot={class:"item-title"},it={class:"item-content"},nt={class:"item-description"},at={class:"item-meta"},rt={class:"meta-item"},dt={class:"meta-item"},ct={key:1,class:"item-footer"},ut={__name:"ItemCard",props:{item:{type:Object,required:!0}},emits:["click","claim"],setup(r){const p=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),s("circle",{cx:12,cy:10,r:3})]),M=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("rect",{width:18,height:18,x:3,y:4,rx:2,ry:2}),s("line",{x1:16,x2:16,y1:2,y2:6}),s("line",{x1:8,x2:8,y1:2,y2:6}),s("line",{x1:3,x2:21,y1:10,y2:10})]),S=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"}),s("path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"}),s("path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"}),s("path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"})]),k=r,b=H(()=>X(k.item.status));return(w,a)=>(n(),u("div",{class:"item-card",onClick:a[1]||(a[1]=d=>w.$emit("click",r.item))},[r.item.imageUrl?(n(),u("div",et,[t("img",{src:r.item.imageUrl,alt:r.item.title,class:"image"},null,8,st)])):V("",!0),t("div",lt,[t("h3",ot,i(r.item.title),1),t("span",{class:F(["status-badge",b.value.variant])},i(b.value.label),3)]),t("div",it,[t("p",nt,i(r.item.description),1),t("div",at,[t("div",rt,[g(p,{class:"meta-icon"}),t("span",null,i(r.item.location),1)]),t("div",dt,[g(M,{class:"meta-icon"}),t("span",null,i(_(j)(r.item.createdAt)),1)])])]),r.item.status==="AVAILABLE"?(n(),u("div",ct,[t("button",{onClick:a[0]||(a[0]=U(d=>w.$emit("claim",r.item),["stop"])),class:"claim-btn"},[g(S,{class:"btn-icon"}),a[2]||(a[2]=N(" æˆ‘è¦è®¤é¢† ",-1))])])):V("",!0)]))}},mt=P(ut,[["__scopeId","data-v-06e255f4"]]),vt={class:"modal-header"},ht={class:"form-group"},ft={class:"form-group"},yt={class:"form-group"},pt={class:"form-group"},gt={class:"form-group"},bt={class:"form-group"},$t={class:"image-upload-area"},xt={key:1,class:"image-preview"},Ct=["src"],kt={key:0,class:"error-message"},wt={class:"form-actions"},It=["disabled"],Mt={__name:"ReportModal",emits:["close","submit"],setup(r,{emit:p}){const M=()=>s("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("line",{x1:18,y1:6,x2:6,y2:18}),s("line",{x1:6,y1:6,x2:18,y2:18})]),S=p,k=B(!1),b=B(null),w=B(""),a=B(""),d=B(null),v=G({title:"",description:"",location:"",finderName:"",finderContact:"",imageUrl:""});function f(){b.value?.click()}function e($){const l=$.target.files[0];if(!l)return;if(a.value="",!l.type.startsWith("image/")){a.value="è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶";return}if(l.size>10*1024*1024){a.value="å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡10MB";return}d.value=l;const x=new FileReader;x.onload=I=>{w.value=I.target.result},x.readAsDataURL(l)}function m(){w.value="",d.value=null,v.imageUrl="",a.value="",b.value&&(b.value.value="")}async function q(){if(!d.value)return null;try{return(await Q(d.value)).url}catch($){throw a.value="å›¾ç‰‡ä¸Šä¼ å¤±è´¥: "+($.response?.data?.error||$.message),$}}async function D(){if(!k.value){k.value=!0,a.value="";try{if(d.value){const $=await q();v.imageUrl=$}await new Promise($=>setTimeout($,500)),S("submit",{...v})}catch{}finally{k.value=!1}}}return($,l)=>(n(),u("div",{class:"modal-overlay",onClick:l[8]||(l[8]=x=>$.$emit("close"))},[t("div",{class:"modal-content",onClick:l[7]||(l[7]=U(()=>{},["stop"]))},[t("div",vt,[l[9]||(l[9]=t("h2",null,"å‘å¸ƒå¤±ç‰©ä¿¡æ¯",-1)),t("button",{onClick:l[0]||(l[0]=x=>$.$emit("close")),class:"close-btn"},[g(M)])]),t("form",{onSubmit:U(D,["prevent"]),class:"modal-form"},[t("div",ht,[l[10]||(l[10]=t("label",{for:"title"},"å¤±ç‰©æ ‡é¢˜ *",-1)),L(t("input",{id:"title","onUpdate:modelValue":l[1]||(l[1]=x=>v.title=x),type:"text",placeholder:"è¯·è¾“å…¥å¤±ç‰©æ ‡é¢˜ï¼Œå¦‚ï¼šé»‘è‰²é’±åŒ…",required:"",class:"form-input"},null,512),[[A,v.title]])]),t("div",ft,[l[11]||(l[11]=t("label",{for:"description"},"è¯¦ç»†æè¿° *",-1)),L(t("textarea",{id:"description","onUpdate:modelValue":l[2]||(l[2]=x=>v.description=x),placeholder:"è¯·è¯¦ç»†æè¿°å¤±ç‰©çš„ç‰¹å¾ã€é¢œè‰²ã€å¤§å°ç­‰ä¿¡æ¯",required:"",rows:"4",class:"form-textarea"},null,512),[[A,v.description]])]),t("div",yt,[l[12]||(l[12]=t("label",{for:"location"},"å‘çŽ°åœ°ç‚¹ *",-1)),L(t("input",{id:"location","onUpdate:modelValue":l[3]||(l[3]=x=>v.location=x),type:"text",placeholder:"è¯·è¾“å…¥å‘çŽ°å¤±ç‰©çš„å…·ä½“åœ°ç‚¹",required:"",class:"form-input"},null,512),[[A,v.location]])]),t("div",pt,[l[13]||(l[13]=t("label",{for:"finderName"},"å‘çŽ°äººå§“å *",-1)),L(t("input",{id:"finderName","onUpdate:modelValue":l[4]||(l[4]=x=>v.finderName=x),type:"text",placeholder:"è¯·è¾“å…¥æ‚¨çš„å§“å",required:"",class:"form-input"},null,512),[[A,v.finderName]])]),t("div",gt,[l[14]||(l[14]=t("label",{for:"finderContact"},"è”ç³»æ–¹å¼ *",-1)),L(t("input",{id:"finderContact","onUpdate:modelValue":l[5]||(l[5]=x=>v.finderContact=x),type:"text",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·æˆ–å¾®ä¿¡å·",required:"",class:"form-input"},null,512),[[A,v.finderContact]])]),t("div",bt,[l[16]||(l[16]=t("label",{for:"image"},"å¤±ç‰©ç…§ç‰‡",-1)),t("div",$t,[t("input",{id:"image",ref_key:"fileInput",ref:b,type:"file",accept:"image/*",onChange:e,class:"file-input"},null,544),w.value?(n(),u("div",xt,[t("img",{src:w.value,alt:"å¤±ç‰©ç…§ç‰‡é¢„è§ˆ",class:"preview-image"},null,8,Ct),t("div",{class:"image-actions"},[t("button",{type:"button",onClick:f,class:"change-btn"},"æ›´æ¢"),t("button",{type:"button",onClick:m,class:"remove-btn"},"åˆ é™¤")])])):(n(),u("div",{key:0,class:"upload-placeholder",onClick:f},[...l[15]||(l[15]=[t("div",{class:"upload-icon"},"ðŸ“·",-1),t("div",{class:"upload-text"},"ç‚¹å‡»ä¸Šä¼ å¤±ç‰©ç…§ç‰‡",-1),t("div",{class:"upload-hint"},"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæœ€å¤§ 10MB",-1)])]))]),a.value?(n(),u("div",kt,i(a.value),1)):V("",!0)]),t("div",wt,[t("button",{type:"button",onClick:l[6]||(l[6]=x=>$.$emit("close")),class:"cancel-btn"}," å–æ¶ˆ "),t("button",{type:"submit",disabled:k.value,class:"submit-btn"},i(k.value?"å‘å¸ƒä¸­...":"å‘å¸ƒå¤±ç‰©"),9,It)])],32)])]))}},_t=P(Mt,[["__scopeId","data-v-d14b316b"]]),Bt={class:"modal-header"},Vt={class:"item-detail"},St={class:"detail-header"},Nt={class:"item-title"},Lt={class:"detail-content"},At={class:"detail-section"},Et={class:"detail-section"},Ut={class:"info-grid"},qt={class:"info-item"},Dt={class:"info-value"},Rt={class:"info-item"},Ft={class:"info-value"},Ht={class:"info-item"},Pt={class:"info-value"},Tt={class:"info-item"},zt={class:"info-value"},jt={key:0,class:"detail-section"},Xt={class:"claims-list"},Zt={class:"claim-info"},Gt={class:"claim-name"},Kt={class:"claim-time"},Ot={key:0,class:"detail-actions"},Wt={__name:"ItemDetailModal",props:{item:{type:Object,required:!0}},emits:["close","claim"],setup(r){const p=()=>h("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("line",{x1:18,y1:6,x2:6,y2:18}),h("line",{x1:6,y1:6,x2:18,y2:18})]),M=()=>h("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),h("circle",{cx:12,cy:10,r:3})]),S=()=>h("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("rect",{width:18,height:18,x:3,y:4,rx:2,ry:2}),h("line",{x1:16,x2:16,y1:2,y2:6}),h("line",{x1:8,x2:8,y1:2,y2:6}),h("line",{x1:3,x2:21,y1:10,y2:10})]),k=()=>h("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),h("circle",{cx:12,cy:7,r:4})]),b=()=>h("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})]),w=()=>h("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"}),h("path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"}),h("path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"}),h("path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"})]),a=r,d=H(()=>X(a.item.status));function v(f){return Z(f).variant}return(f,e)=>(n(),u("div",{class:"modal-overlay",onClick:e[3]||(e[3]=m=>f.$emit("close"))},[t("div",{class:"modal-content",onClick:e[2]||(e[2]=U(()=>{},["stop"]))},[t("div",Bt,[e[4]||(e[4]=t("h2",null,"å¤±ç‰©è¯¦æƒ…",-1)),t("button",{onClick:e[0]||(e[0]=m=>f.$emit("close")),class:"close-btn"},[g(p)])]),t("div",Vt,[t("div",St,[t("h3",Nt,i(r.item.title),1),t("span",{class:F(["status-badge",d.value.variant])},i(d.value.label),3)]),t("div",Lt,[t("div",At,[e[5]||(e[5]=t("h4",null,"è¯¦ç»†æè¿°",-1)),t("p",null,i(r.item.description),1)]),t("div",Et,[e[10]||(e[10]=t("h4",null,"å‘çŽ°ä¿¡æ¯",-1)),t("div",Ut,[t("div",qt,[g(M,{class:"info-icon"}),t("div",null,[e[6]||(e[6]=t("span",{class:"info-label"},"å‘çŽ°åœ°ç‚¹",-1)),t("span",Dt,i(r.item.location),1)])]),t("div",Rt,[g(S,{class:"info-icon"}),t("div",null,[e[7]||(e[7]=t("span",{class:"info-label"},"å‘çŽ°æ—¶é—´",-1)),t("span",Ft,i(_(j)(r.item.createdAt)),1)])]),t("div",Ht,[g(k,{class:"info-icon"}),t("div",null,[e[8]||(e[8]=t("span",{class:"info-label"},"å‘çŽ°äºº",-1)),t("span",Pt,i(r.item.finderName),1)])]),t("div",Tt,[g(b,{class:"info-icon"}),t("div",null,[e[9]||(e[9]=t("span",{class:"info-label"},"è”ç³»æ–¹å¼",-1)),t("span",zt,i(r.item.finderContact),1)])])])]),r.item.claims&&r.item.claims.length>0?(n(),u("div",jt,[e[11]||(e[11]=t("h4",null,"è®¤é¢†è®°å½•",-1)),t("div",Xt,[(n(!0),u(T,null,z(r.item.claims,m=>(n(),u("div",{key:m.id,class:"claim-item"},[t("div",Zt,[t("span",Gt,i(m.claimerName),1),t("span",Kt,i(_(j)(m.createdAt)),1)]),t("span",{class:F(["claim-status",v(m.status)])},i(_(Z)(m.status).label),3)]))),128))])])):V("",!0)]),r.item.status==="AVAILABLE"?(n(),u("div",Ot,[t("button",{onClick:e[1]||(e[1]=m=>f.$emit("claim",r.item)),class:"claim-btn"},[g(w,{class:"btn-icon"}),e[12]||(e[12]=N(" æˆ‘è¦è®¤é¢† ",-1))])])):V("",!0)])])]))}},Jt=P(Wt,[["__scopeId","data-v-0d7f7a34"]]),Qt={class:"modal-header"},Yt={class:"modal-body"},te={class:"filter-tabs"},ee=["onClick"],se={class:"items-list"},le={key:0,class:"empty-state"},oe={key:1},ie={class:"item-header"},ne={class:"item-content"},ae={class:"item-description"},re={class:"item-meta"},de={key:0,class:"item-claims"},ce={class:"claims-list"},ue={class:"claim-info"},me={class:"claim-name"},ve={class:"claim-contact"},he={key:0,class:"more-claims"},fe={class:"item-actions"},ye=["onClick"],pe=["onClick"],ge={__name:"MyItemsModal",emits:["close"],setup(r){const p=()=>s("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("line",{x1:18,y1:6,x2:6,y2:18}),s("line",{x1:6,y1:6,x2:18,y2:18})]),M=()=>s("svg",{width:48,height:48,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("line",{x1:16.5,y1:9.4,x2:7.5,y2:4.21}),s("path",{d:"m21 16-4 2-4-2"}),s("path",{d:"m21 8-4 2-4-2"}),s("path",{d:"m5 12-4 2-4-2"}),s("path",{d:"m9 12 4 2 4-2"}),s("path",{d:"m17 12 4 2-4 2-4-2"}),s("path",{d:"m13 12-4-2-4 2"})]),S=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),s("circle",{cx:12,cy:10,r:3})]),k=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("rect",{width:18,height:18,x:3,y:4,rx:2,ry:2}),s("line",{x1:16,x2:16,y1:2,y2:6}),s("line",{x1:8,x2:8,y1:2,y2:6}),s("line",{x1:3,x2:21,y1:10,y2:10})]),b=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]),w=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("polyline",{points:"3,6 5,6 21,6"}),s("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]),a=O(),d=B("all"),v=B(!1),f=B(null);K(async()=>{try{await a.loadMyItems()}catch(c){console.error("åŠ è½½æˆ‘çš„å‘å¸ƒå¤±è´¥:",c)}});const e=[{value:"all",label:"å…¨éƒ¨"},{value:"AVAILABLE",label:"å¯è®¤é¢†"},{value:"PENDING_REVIEW",label:"å®¡æ ¸ä¸­"},{value:"CLAIMED",label:"å·²è®¤é¢†"},{value:"RETURNED",label:"å·²å½’è¿˜"}],m=H(()=>a.myItems),q=H(()=>d.value==="all"?m.value:m.value.filter(c=>c.status===d.value));function D(c){return X(c).variant}function $(c){return Z(c).variant}async function l(c){f.value={...c},v.value=!0}async function x(c){if(confirm(`ç¡®å®šè¦åˆ é™¤å¤±ç‰©"${c.title}"å—ï¼Ÿ`))try{await a.removeItem(c.id),alert("åˆ é™¤æˆåŠŸ")}catch(C){console.error("åˆ é™¤å¤±è´¥:",C),alert("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•")}}function I(){v.value=!1,f.value=null}async function o(c){try{await a.editItem(f.value.id,c),I(),alert("ä¿®æ”¹æˆåŠŸ")}catch(C){console.error("ä¿®æ”¹å¤±è´¥:",C),alert("ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}}return(c,C)=>(n(),u("div",{class:"modal-overlay",onClick:C[2]||(C[2]=y=>c.$emit("close"))},[t("div",{class:"modal-content",onClick:C[1]||(C[1]=U(()=>{},["stop"]))},[t("div",Qt,[C[3]||(C[3]=t("h2",null,"æˆ‘çš„å‘å¸ƒ",-1)),t("button",{onClick:C[0]||(C[0]=y=>c.$emit("close")),class:"close-btn"},[g(p)])]),t("div",Yt,[t("div",te,[(n(),u(T,null,z(e,y=>t("button",{key:y.value,class:F(["filter-tab",{active:d.value===y.value}]),onClick:E=>d.value=y.value},i(y.label),11,ee)),64))]),t("div",se,[q.value.length===0?(n(),u("div",le,[g(M,{class:"empty-icon"}),C[4]||(C[4]=t("p",null,"æš‚æ— ç›¸å…³å¤±ç‰©",-1))])):(n(),u("div",oe,[(n(!0),u(T,null,z(q.value,y=>(n(),u("div",{key:y.id,class:"item-card"},[t("div",ie,[t("h3",null,i(y.title),1),t("span",{class:F(["status-badge",D(y.status)])},i(_(X)(y.status).label),3)]),t("div",ne,[t("p",ae,i(y.description),1),t("div",re,[t("span",null,[g(S,{class:"meta-icon"}),N(i(y.location),1)]),t("span",null,[g(k,{class:"meta-icon"}),N(i(_(j)(y.createdAt)),1)])])]),y.claims&&y.claims.length>0?(n(),u("div",de,[t("h4",null,"è®¤é¢†è®°å½• ("+i(y.claims.length)+")",1),t("div",ce,[(n(!0),u(T,null,z(y.claims.slice(0,3),E=>(n(),u("div",{key:E.id,class:"claim-item"},[t("div",ue,[t("span",me,i(E.claimerName),1),t("span",ve,i(E.claimerContact),1)]),t("span",{class:F(["claim-status",$(E.status)])},i(_(Z)(E.status).label),3)]))),128)),y.claims.length>3?(n(),u("div",he," è¿˜æœ‰ "+i(y.claims.length-3)+" æ¡è®¤é¢†è®°å½•... ",1)):V("",!0)])])):V("",!0),t("div",fe,[t("button",{onClick:E=>l(y),class:"action-btn edit-btn"},[g(b,{class:"btn-icon"}),C[5]||(C[5]=N(" ç¼–è¾‘ ",-1))],8,ye),t("button",{onClick:E=>x(y),class:"action-btn delete-btn"},[g(w,{class:"btn-icon"}),C[6]||(C[6]=N(" åˆ é™¤ ",-1))],8,pe)])]))),128))]))])])]),v.value&&f.value?(n(),R(Y,{key:0,item:f.value,onClose:I,onSubmit:o},null,8,["item"])):V("",!0)]))}},be=P(ge,[["__scopeId","data-v-9e580832"]]),$e={class:"modal-header"},xe={class:"item-summary"},Ce={class:"item-meta"},ke={class:"form-group"},we={class:"form-group"},Ie={class:"form-group"},Me={class:"notice"},_e={class:"form-actions"},Be=["disabled"],Ve={__name:"ClaimModal",props:{item:{type:Object,required:!0}},emits:["close","submit"],setup(r,{emit:p}){const M=()=>s("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("line",{x1:18,y1:6,x2:6,y2:18}),s("line",{x1:6,y1:6,x2:18,y2:18})]),S=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),s("circle",{cx:12,cy:10,r:3})]),k=()=>s("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("rect",{width:18,height:18,x:3,y:4,rx:2,ry:2}),s("line",{x1:16,x2:16,y1:2,y2:6}),s("line",{x1:8,x2:8,y1:2,y2:6}),s("line",{x1:3,x2:21,y1:10,y2:10})]),b=()=>s("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("circle",{cx:12,cy:12,r:10}),s("line",{x1:12,y1:16,x2:12,y2:12}),s("line",{x1:12,y1:8,x2:12.01,y2:8})]),w=p,a=B(!1),d=G({claimerName:"",claimerContact:"",reason:""});async function v(){if(!a.value){a.value=!0;try{await new Promise(f=>setTimeout(f,500)),w("submit",{...d})}finally{a.value=!1}}}return(f,e)=>(n(),u("div",{class:"modal-overlay",onClick:e[6]||(e[6]=m=>f.$emit("close"))},[t("div",{class:"modal-content",onClick:e[5]||(e[5]=U(()=>{},["stop"]))},[t("div",$e,[e[7]||(e[7]=t("h2",null,"è®¤é¢†å¤±ç‰©",-1)),t("button",{onClick:e[0]||(e[0]=m=>f.$emit("close")),class:"close-btn"},[g(M)])]),t("div",xe,[t("h3",null,i(r.item.title),1),t("p",null,i(r.item.description),1),t("div",Ce,[t("span",null,[g(S,{class:"meta-icon"}),N(i(r.item.location),1)]),t("span",null,[g(k,{class:"meta-icon"}),N(i(_(j)(r.item.createdAt)),1)])])]),t("form",{onSubmit:U(v,["prevent"]),class:"modal-form"},[t("div",ke,[e[8]||(e[8]=t("label",{for:"claimerName"},"æ‚¨çš„å§“å *",-1)),L(t("input",{id:"claimerName","onUpdate:modelValue":e[1]||(e[1]=m=>d.claimerName=m),type:"text",placeholder:"è¯·è¾“å…¥æ‚¨çš„çœŸå®žå§“å",required:"",class:"form-input"},null,512),[[A,d.claimerName]])]),t("div",we,[e[9]||(e[9]=t("label",{for:"claimerContact"},"è”ç³»æ–¹å¼ *",-1)),L(t("input",{id:"claimerContact","onUpdate:modelValue":e[2]||(e[2]=m=>d.claimerContact=m),type:"text",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·æˆ–å¾®ä¿¡å·",required:"",class:"form-input"},null,512),[[A,d.claimerContact]])]),t("div",Ie,[e[10]||(e[10]=t("label",{for:"reason"},"è®¤é¢†ç†ç”± *",-1)),L(t("textarea",{id:"reason","onUpdate:modelValue":e[3]||(e[3]=m=>d.reason=m),placeholder:"è¯·è¯¦ç»†è¯´æ˜Žæ‚¨è®¤é¢†æ­¤ç‰©å“çš„ç†ç”±ï¼Œå¦‚ï¼šç‰©å“ç‰¹å¾ã€ä¸¢å¤±æ—¶é—´åœ°ç‚¹ç­‰",required:"",rows:"4",class:"form-textarea"},null,512),[[A,d.reason]])]),t("div",Me,[g(b,{class:"notice-icon"}),e[11]||(e[11]=t("div",{class:"notice-content"},[t("h4",null,"è®¤é¢†é¡»çŸ¥"),t("ul",null,[t("li",null,"è¯·ç¡®ä¿æ‚¨æä¾›çš„ä¿¡æ¯çœŸå®žæœ‰æ•ˆ"),t("li",null,"è®¤é¢†ç”³è¯·æäº¤åŽï¼Œç®¡ç†å‘˜ä¼šè¿›è¡Œå®¡æ ¸"),t("li",null,"å®¡æ ¸é€šè¿‡åŽï¼Œè¯·è”ç³»å‘çŽ°äººè¿›è¡Œç‰©å“äº¤æŽ¥"),t("li",null,"æ¶æ„è®¤é¢†å°†æ‰¿æ‹…ç›¸åº”æ³•å¾‹è´£ä»»")])],-1))]),t("div",_e,[t("button",{type:"button",onClick:e[4]||(e[4]=m=>f.$emit("close")),class:"cancel-btn"}," å–æ¶ˆ "),t("button",{type:"submit",disabled:a.value,class:"submit-btn"},i(a.value?"æäº¤ä¸­...":"æäº¤è®¤é¢†ç”³è¯·"),9,Be)])],32)])]))}},Se=P(Ve,[["__scopeId","data-v-ec36780f"]]),Ne={class:"mobile-home"},Le={class:"header"},Ae={class:"header-content"},Ee={class:"user-info"},Ue={class:"user-details"},qe={class:"user-name"},De={class:"user-id"},Re={class:"search-section"},Fe={class:"search-box"},He={class:"quick-actions"},Pe={class:"items-section"},Te={class:"section-header"},ze={class:"item-count"},je={key:0,class:"loading"},Xe={key:1,class:"error"},Ze={key:2,class:"empty"},Ge={key:3,class:"items-list"},Ke={__name:"MobileHome",setup(r){const p=O(),M=tt(),S=J(),k=B(""),b=B(!1),w=B(!1),a=B(null),d=B(null);M.initFromStorage();const v=H(()=>M.userName),f=H(()=>M.userStudentId);K(()=>{e()});async function e(){try{await p.loadItems()}catch(I){console.error("åŠ è½½å¤±ç‰©åˆ—è¡¨å¤±è´¥:",I)}}async function m(){try{await p.loadItems(k.value.trim()||void 0)}catch(I){console.error("æœç´¢å¤±è´¥:",I)}}function q(I){a.value=I}function D(I){d.value=I}async function $(I){try{await p.createItem(I),b.value=!1,alert("å‘å¸ƒæˆåŠŸï¼")}catch(o){console.error("å‘å¸ƒå¤±è´¥:",o),alert("å‘å¸ƒå¤±è´¥ï¼Œè¯·é‡è¯•")}}async function l(I){try{await p.createClaim(d.value.id,I),d.value=null,alert("è®¤é¢†ç”³è¯·æäº¤æˆåŠŸï¼")}catch(o){console.error("è®¤é¢†ç”³è¯·å¤±è´¥:",o),alert("è®¤é¢†ç”³è¯·å¤±è´¥ï¼Œè¯·é‡è¯•")}}function x(){confirm("ç¡®å®šè¦ç™»å‡ºå—ï¼Ÿ")&&(M.logout(),S.push("/login"))}return(I,o)=>(n(),u("div",Ne,[t("header",Le,[t("div",Ae,[o[9]||(o[9]=t("div",{class:"header-main"},[t("h2",{class:"subtitle"},"æ ¡å›­å¤±ç‰©æ‹›é¢†ç³»ç»Ÿ")],-1)),t("div",Ee,[t("div",Ue,[t("span",qe,i(v.value),1),t("span",De,i(f.value),1)]),t("button",{onClick:x,class:"logout-btn"},[...o[8]||(o[8]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t("polyline",{points:"16,17 21,12 16,7"}),t("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),N(" ç™»å‡º ",-1)])])])])]),t("div",Re,[t("div",Fe,[L(t("input",{"onUpdate:modelValue":o[0]||(o[0]=c=>k.value=c),type:"text",placeholder:"æœç´¢å¤±ç‰©ä¿¡æ¯...",class:"search-input",onKeyup:W(m,["enter"])},null,544),[[A,k.value]]),t("button",{onClick:m,class:"search-btn"},[...o[10]||(o[10]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("path",{d:"m21 21-4.35-4.35"})],-1)])])])]),t("div",He,[t("button",{onClick:o[1]||(o[1]=c=>b.value=!0),class:"action-btn report-btn"},[...o[11]||(o[11]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),t("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1),N(" å‘å¸ƒå¤±ç‰© ",-1)])]),t("button",{onClick:o[2]||(o[2]=c=>w.value=!0),class:"action-btn my-items-btn"},[...o[12]||(o[12]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1),N(" æˆ‘çš„å‘å¸ƒ ",-1)])])]),t("div",Pe,[t("div",Te,[o[13]||(o[13]=t("h3",null,"æœ€æ–°å¤±ç‰©",-1)),t("span",ze,"å…± "+i(_(p).itemCount)+" ä»¶",1)]),_(p).loading?(n(),u("div",je,[...o[14]||(o[14]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"åŠ è½½ä¸­...",-1)])])):_(p).error?(n(),u("div",Xe,[t("p",null,i(_(p).error),1),t("button",{onClick:e,class:"retry-btn"},"é‡è¯•")])):_(p).isEmpty?(n(),u("div",Ze,[o[15]||(o[15]=t("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),t("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1)),o[16]||(o[16]=t("p",null,"æš‚æ— å¤±ç‰©ä¿¡æ¯",-1)),t("button",{onClick:o[3]||(o[3]=c=>b.value=!0),class:"empty-action-btn"},"å‘å¸ƒç¬¬ä¸€ä¸ªå¤±ç‰©")])):(n(),u("div",Ge,[(n(!0),u(T,null,z(_(p).items,c=>(n(),R(mt,{key:c.id,item:c,onClick:C=>q(c),onClaim:D},null,8,["item","onClick"]))),128))]))]),b.value?(n(),R(_t,{key:0,onClose:o[4]||(o[4]=c=>b.value=!1),onSubmit:$})):V("",!0),a.value?(n(),R(Jt,{key:1,item:a.value,onClose:o[5]||(o[5]=c=>a.value=null),onClaim:D},null,8,["item"])):V("",!0),w.value?(n(),R(be,{key:2,onClose:o[6]||(o[6]=c=>w.value=!1)})):V("",!0),d.value?(n(),R(Se,{key:3,item:d.value,onClose:o[7]||(o[7]=c=>d.value=null),onSubmit:l},null,8,["item"])):V("",!0)]))}},ts=P(Ke,[["__scopeId","data-v-acd56acb"]]);export{ts as default};
