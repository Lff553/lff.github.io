const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MobileHome.js","./vue.js","./EditItemModal.js","./http.js","./vendor.js","./EditItemModal.css","./MobileHome.css","./AdminDashboard.js","./AdminDashboard.css","./Login.js","./Login.css"])))=>i.map(i=>d[i]);
import{c as L,a as i,b as w,r as A,t as I,o as P,d as R,e as S,f as N,g as b}from"./vue.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();const O=""+new URL("../images/1.png",import.meta.url).href,D=(o,n)=>{const r=o.__vccOpts||o;for(const[a,e]of n)r[a]=e;return r},q={},M={class:"app-shell"},V={class:"app-content"},T={class:"app-footer"};function B(o,n){const r=A("RouterView");return P(),L("div",M,[n[1]||(n[1]=i("header",{class:"app-header"},[i("div",{class:"header-left"},[i("div",{class:"logo"},[i("img",{src:O,alt:"杭州电子科技大学信息工程学院校徽"})]),i("div",null,[i("h1",null,"杭州电子科技大学信息工程学院校园失物招领系统"),i("p",null,"Lost & Found · 温暖每一次团聚")])])],-1)),i("main",V,[w(r)]),i("footer",T,[i("span",null,"© "+I(new Date().getFullYear())+" 杭州电子科技大学信息工程学院",1),n[0]||(n[0]=i("span",null,"服务热线：0571-8691-8888",-1))])])}const $=D(q,[["render",B],["__scopeId","data-v-eefa97a2"]]),k="modulepreload",C=function(o,n){return new URL(o,n).href},y={},h=function(n,r,a){let e=Promise.resolve();if(r&&r.length>0){let E=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};const s=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),v=c?.nonce||c?.getAttribute("nonce");e=E(r.map(l=>{if(l=C(l,a),l in y)return;y[l]=!0;const m=l.endsWith(".css"),d=m?'[rel="stylesheet"]':"";if(a)for(let f=s.length-1;f>=0;f--){const p=s[f];if(p.href===l&&(!m||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":k,m||(u.as="script"),u.crossOrigin="",u.href=l,v&&u.setAttribute("nonce",v),document.head.appendChild(u),m)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function t(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return e.then(s=>{for(const c of s||[])c.status==="rejected"&&t(c.reason);return n().catch(t)})},U=()=>h(()=>import("./MobileHome.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),F=()=>h(()=>import("./AdminDashboard.js"),__vite__mapDeps([7,1,2,3,4,5,8]),import.meta.url),j=()=>h(()=>import("./Login.js"),__vite__mapDeps([9,1,3,4,10]),import.meta.url),g=R({history:S(),routes:[{path:"/login",name:"login",component:j,meta:{title:"登录 - 杭州电子科技大学信息工程学院校园失物招领系统",requiresGuest:!0}},{path:"/",name:"mobile",component:U,meta:{title:"移动端 - 杭州电子科技大学信息工程学院校园失物招领系统",requiresAuth:!0,allowedRoles:["STUDENT","ADMIN"]}},{path:"/admin",name:"admin",component:F,meta:{title:"管理端 - 杭州电子科技大学信息工程学院校园失物招领系统",requiresAuth:!0,allowedRoles:["ADMIN"]}},{path:"/:pathMatch(.*)*",redirect:"/"}],scrollBehavior(){return{top:0}}});g.beforeEach((o,n,r)=>{const a=localStorage.getItem("isLoggedIn")==="true",e=localStorage.getItem("user");let t=null;if(e)try{t=JSON.parse(e)}catch(s){console.error("解析用户数据失败:",s),localStorage.removeItem("user"),localStorage.removeItem("isLoggedIn")}if(o.meta.requiresGuest){if(a&&t){t.role==="ADMIN"?r("/admin"):r("/");return}r();return}if(o.meta.requiresAuth){if(!a||!t){r("/login");return}if(o.meta.allowedRoles&&o.meta.allowedRoles.length>0&&!o.meta.allowedRoles.includes(t.role)){t.role==="ADMIN"?r("/admin"):r("/");return}}r()});g.afterEach(o=>{o.meta?.title&&(document.title=o.meta.title)});const _=N($);_.use(b());_.use(g);_.mount("#app");export{D as _};
