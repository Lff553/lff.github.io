import{a}from"./vendor-R-lXtGyY.js";const n="/api",r=a.create({baseURL:n,timeout:1e4});r.interceptors.request.use(e=>{const s=localStorage.getItem("user"),o=localStorage.getItem("isLoggedIn");if(s&&o==="true")try{const t=JSON.parse(s);t.studentId&&(e.headers["X-Student-Id"]=t.studentId)}catch(t){console.error("解析用户数据失败:",t)}return e},e=>Promise.reject(e));r.interceptors.response.use(e=>e,e=>{const s=e.response?.data?.message||e.response?.data?.errors||e.message||"请求失败，请稍后再试";return Promise.reject(new Error(typeof s=="string"?s:JSON.stringify(s)))});export{r as h};
